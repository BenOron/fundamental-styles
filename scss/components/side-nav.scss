@import "./../settings";
@import "./../mixins";
@import "./../functions";
@import "./../../theme-designer/Base/baseLib/sap_fiori_3/sass_variables.scss";


$block: #{$fd-namespace}-side-nav;

.#{$block} {
    //LOCAL VARS AND MIXINS *******************************************
    $fd-side-nav-max-width: 15rem;
    $fd-side-nav-max-width--condensed: 3rem;

    $fd-side-nav-item-height: 2.75rem;
    $fd-side-nav-item-height--compact: 2rem;

    $fd-side-nav-icon-height: 2.75rem;
    $fd-side-nav-icon-height--compact: 2rem;
    $fd-side-nav-icon-width: 3rem;

    $fd-side-nav-padding: 1rem;
    $fd-side-nav-padding-2: 2rem;
    $fd-side-nav-padding-3: 3rem;

    $fd-side-nav-separator-margin: 0.25rem 1rem;
    $fd-side-nav-separator-margin--condensed: 0.25rem 0.5rem;
    $fd-side-nav-utility-margin: 3rem;

    $fd-side-nav-border: $sapList_BorderWidth solid;


    @mixin fd-side-nav-arrow {
        font-family: "SAP-icons";
        font-style: normal;
        font-weight: normal;
        font-size: 0.875rem;
        text-decoration: inherit;
        text-transform: none;
        speak: none;
    }

    @mixin fd-side-nav-icon-container {
        min-height: $fd-side-nav-icon-height;
        min-width: $fd-side-nav-icon-width;
        color: $sapContent_IconColor;
    }

    //BLOCK BASE *******************************************
    background-color: $sapList_Background;
    max-width: $fd-side-nav-max-width;
    border-right: $fd-side-nav-border;
    border-right-color: $sapGroup_ContentBorderColor;
    display: flex;
    flex-direction: column;
    justify-content: space-between;

    //ELEMENTS *******************************************
    &__main-navigation,
    &__list,
    &__sublist,
    &__item,
    &__subitem {
        @include fd-reset();
    }

    &__utility {
        @include fd-reset();
        margin-top: $fd-side-nav-utility-margin;
        &::before {
            content: " ";
            display: block;
            border-top: $fd-side-nav-border;
            border-top-color: $sapAccentColor6;
            margin: $fd-side-nav-separator-margin;
        }
    }

    &__sublist {
        &[aria-hidden="true"] {
            display: none;
        }
    }

    &__item {
        &.no-icon {
            .#{$block}__title:first-child {
                padding-left: $fd-side-nav-padding-3;
            }
        }

        &.has-child {
            .#{$block}__link {
                &::after {
                    @include fd-side-nav-icon-container();
                    @include fd-flex-center();
                    @include fd-side-nav-arrow();
                    content: "\e066";                        // Hard-coded value
                }
                &.is-expanded,
                &[aria-expanded="true"] {
                    border-bottom: none;
                    &::after {
                        content: "\e1e2";                   // Hard-coded value
                    }
                }
                &:active::after {
                    color: $sapList_Active_TextColor;
                }
            }
        }
    }

    &__subitem {
        &[aria-hidden="true"] {
            display: none;
        }

        &:last-child {
            .#{$block}__sublink {
                border-bottom: $fd-side-nav-border;
                border-bottom-color: $sapList_BorderColor;
            }
        }
    }

    &__link,
    &__sublink {
        @include fd-reset();
        @include fd-flex-vertical-align();
        height: $fd-side-nav-item-height;
        border-bottom: $fd-side-nav-border;
        border-bottom-color: $sapList_BorderColor;

        &:hover {
            background-color: $sapList_Hover_Background;
        }

        &:active {
            background-color: $sapList_Active_Background;
            border-bottom-color: fade($sapList_BorderColor, 0%);

            .#{$block}__title,
            .#{$block}__icon {
                color: $sapList_Active_TextColor;
            }
        }

        &.is-selected,
        &[aria-selected="true"] {
            background-color: $sapList_SelectionBackgroundColor;
            border-bottom-color: $sapSelectedColor;

            &:hover {
                background-color: $sapList_Hover_SelectionBackground;
            }
            &:active {
            background-color: $sapList_Active_Background;
            border-bottom-color: fade($sapList_BorderColor, 0%);

                .#{$block}__title,
                .#{$block}__icon {
                    color: $sapList_Active_TextColor;
                }
            }
        }
    }

    &__sublink {
        padding-left: $fd-side-nav-padding;
        border-bottom: none;
    }

    &__icon {
        @include fd-flex-center();
        @include fd-side-nav-icon-container();

        &[class*=sap-icon]::before {
            font-size: 1.125rem;        // Mismatch with fd-icons? Hard-coded value
        }
    }

    &__title {
        width: 100%;
        font-family: $sapFontFamily;
        font-size: $sapFontLargeSize;
        font-weight: normal;
        color: $sapList_TextColor;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        padding-right: $fd-side-nav-padding;
        &:first-child {
            padding-left: $fd-side-nav-padding;
        }
    }


    &.condensed {
        max-width: $fd-side-nav-max-width--condensed;
        .#{$block} {
            &__title {
                display: none;
            }
            &__item {
                &.no-icon {
                  display: none;
                }
                &.has-child {
                    .#{$block}__link::after {
                        display: none;
                    }
                    .#{$block}__sublist {
                        display: none;
                    }
                }
            }
            &__utility {
                &::before {
                    margin: $fd-side-nav-separator-margin--condensed;
                }
            }
        }
    }

    &.has-icons {
        .#{$block}__sublink {
            padding-left: $fd-side-nav-padding-2;
        }
    }

    &.compact {
        .#{$block} {
            &__link,
            &__sublink {
                height: $fd-side-nav-item-height--compact;
            }

            &__icon,
            &__item.has-child .#{$block}__link::after {
                min-height: $fd-side-nav-icon-height--compact;
            }

            &__title {
                font-size: $sapFontSize;
            }
        }

        .#{$block}__icon[class*=sap-icon]::before {
            font-size: 1rem;                    // Mismatch with fd-icons? Hard-coded value
        }
    }
}